<ub-tabs>
  <ub-tab label="Configuração">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="p-fluid p-formgrid grid">

        <div class="col-12 md:col-6">
          <ub-input
            label="Nome"
            placeholder="Digite o nome da consulta"
            formControlName="name"
            [error]="FormErrorHandlerService.getError('name', errors)"
            (blur)="generateKey($event)"
          ></ub-input>
        </div>

        <div class="col-12 md:col-6">
          <ub-input
            label="Chave"
            placeholder="Digite a chave única da consulta"
            formControlName="key"
            [error]="FormErrorHandlerService.getError('key', errors)"
          ></ub-input>
        </div>

        <div class="col-12">
          <ub-dropdown
            label="Serviço"
            placeholder="Escolha o serviço de consulta"
            formControlName="service_slug"
            [error]="FormErrorHandlerService.getError('service_slug', errors)"
            [options]="services"
            optionLabel="description" optionValue="slug" optionDescription="name"
          ></ub-dropdown>
        </div>

      </div>

      <!-- Botão de Salvar -->
      <div class="flex justify-content-end gap-2">
        <ub-button type="submit" [disabled]="form.invalid" [loading]="loading">Salvar</ub-button>
      </div>
    </form>
  </ub-tab>
  @if (dynamicQuery) {
    <ub-tab label="Parâmetros">
      <app-service-parameters [serviceSlug]="form.get('service_slug')?.value" [companyId]="companyId"></app-service-parameters>
    </ub-tab>
  }
</ub-tabs>
