<div class="client-list-container">

  <!-- Header Opcional -->
  <div class="list-header">
    <div class="header-content">
      <div class="title-section">
        <h2 class="list-title">
          <i class="bx bx-grid-alt"></i>
          Meus Proejtos
        </h2>
        @if (!loading && clients.length > 0) {
          <span class="count-badge">{{ clients.length }}</span>
        }
      </div>

      <div class="no-home-message">
        <div class="message-content">
          <p class="message-greeting">
            OlÃ¡ <strong>{{ auth.getUserName() }}</strong>! ðŸ‘‹
          </p>
          <p class="message-text">
            VocÃª tem
            <strong>{{ clients.length }} {{ clients.length === 1 ? 'projeto disponÃ­vel' : 'projetos disponÃ­veis' }}</strong>,
            clique em <strong>Acesssar</strong> para acessar.
          </p>
        </div>
      </div>

    </div>
  </div>


  <!-- Estado de Loading -->
  @if (loading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Carregando dashboards...</p>
    </div>
  }

  <!-- Estado de Erro -->
  @else if (error) {
    <div class="error-state">
      <div class="error-icon">
        <i class="bx bx-error-circle"></i>
      </div>
      <h3 class="error-title">NÃ£o foi possÃ­vel carregar</h3>
      <p class="error-message">{{ error }}</p>
      <button class="retry-button" (click)="loadClients()">
        <i class="bx bx-refresh"></i>
        Tentar Novamente
      </button>
    </div>
  }

  <div class="clients-grid">
    @for (client of clients; track client.slug) {
      <div class="client-card" (click)="onClientSelect(client)">

        <div class="card-header">
          <!-- Ãcone e Badge Principal -->
          <div class="card-icon">
            <i class="bx bx-building"></i>
          </div>

        </div>

        <div class="card-content">
          <h3 class="card-title">{{ client.name }}</h3>

          <!-- InformaÃ§Ãµes Adicionais -->
          <div class="card-info">
            @if (client.role) {
              <div class="info-item role-info"
                   [class.role-owner]="client.role === 'ProprietÃ¡rio'"
                   [class.role-collaborator]="client.role === 'Colaborador'"
                   [class.role-reseller]="client.role === 'Revendedor'">
                <i class="bx" [ngClass]="{
                  'bx-crown': client.role === 'ProprietÃ¡rio',
                  'bx-user-check': client.role === 'Colaborador',
                  'bx-store': client.role === 'Revendedor'
                }"></i>
                <span>{{ client.role }}</span>
              </div>
            }

            @if (client.plan_name) {
              <div class="info-item plan-info" [class.inactive-plan]="!client.has_active_plan">
                <i class="bx" [ngClass]="client.has_active_plan ? 'bx-check-shield' : 'bx-shield-x'"></i>
                <span>{{ client.plan_name }}</span>
              </div>
            }
          </div>
        </div>

        <!-- Indicador de seleÃ§Ã£o -->
        <div class="card-footer">
          <span class="select-hint">
            <i class="bx bx-chevron-right"></i>
            Acessar
          </span>
        </div>
      </div>
    }

    <!-- Card Novo Projeto -->
    <div class="client-card new-project-card" (click)="onNewProject()">
      <div class="card-header">
        <div class="card-icon new-project-icon">
          <i class="bx bx-plus"></i>
        </div>
      </div>

      <div class="card-content">
        <h3 class="card-title">Novo Projeto</h3>
        <p class="card-description">Criar um novo projeto personalizado</p>
      </div>

      <div class="card-footer">
          <span class="select-hint">
            <i class="bx bx-plus-circle"></i>
            Criar Projeto
          </span>
      </div>
    </div>
  </div>

</div>

